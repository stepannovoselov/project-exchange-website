{% extends 'base_template.html' %}

{% block title %}
{% if edit is defined %}
    Редактирование проекта «{{ project.name }}»
{% else %}
    Создать проект
{% endif %}
{% endblock %}

{% block content %}
<div class="modal fade" tabindex="-1" id="AI_tools">
    <div class="modal-dialog modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">ИИ функции</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Закрыть"></button>
            </div>
            <div class="modal-body">
                <div>
                    <div class="row text-muted mx-4 mb-4">
                        Данные функции помогут вам заполнить необходимые поля при помощи искусственного интеллекта. При нажатии на одну из кнопок будет автоматически заполнено одно или несколько полей.
                    </div>
                    <div class="row mx-4 mb-3">
                        <button class="btn btn-outline-dark" onclick="ai_generate_project()">Придумать проект</button>
                    </div>
                    <div class="row mx-4 mb-5">
                        <button class="btn btn-outline-dark" onclick="ai_generate_science()">Придумать исследование</button>
                    </div>
                    <div class="row mx-4 mb-5">
                        <button class="btn btn-outline-dark" onclick="ai_upgrade_text()">Улучшить уже введённый текст в ...</button>
                        <select class="form-select" id="upgrade_text_selector">
                            <option selected>Поле «Название»</option>
                            <option>Поле «Тема»</option>
                            <option>Поле «Цель»</option>
                            <option>Поле «Описание»</option>
                        </select>
                    </div>
                    <div class="row mx-4">
                        <button class="btn btn-outline-dark" onclick="ai_fill_text()">Заполнить ... на основе текста из других полей</button>
                        <select class="form-select" id="fill_text_selector">
                            <option selected>Поле «Название»</option>
                            <option>Поле «Тема»</option>
                            <option>Поле «Цель»</option>
                            <option>Поле «Описание»</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="container mt-2">
    <div class="row justify-content-center">
        <div class="h2 mt-2">
            {% if edit is defined %}
                Редактирование проекта
            {% else %}
                Создание проекта
            {% endif %}
        </div>
        <div class="card mt-4">
            <div class="card-body">
                <form action="" method="post" id="project_form">
                    <div class="form-group mb-5">
                        <div class="row">
                            <label for="name" class="col-sm-2 col-form-label custom-required-mark">Название</label>
                            <div class="col-sm-10">
                                <textarea type="text" class="form-control custom-textarea-resize-none-hidden-overflow" id="name" name="name" required oninput="textarea_auto_resize('name')">{% if edit is defined %}{{ project.name }}{% endif %}</textarea>
                                <div class="form-text">Как вы назвали ваш проект?</div>
                                <div class="form-text custom-error-block">
                                    {% if errors is defined %}
                                    {{ errors.get('name', '')[0] }}
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group mb-5">
                        <div class="row">
                            <label for="type" class="col-sm-2 col-form-label custom-required-mark">Тип</label>
                            <div class="col-sm-10">
                                <select class="form-select" id="type" name="type">
                                    <option value="Проект" id="opt1" selected>Проект</option>
                                    <option value="Исследование" id="opt2">Исследование</option>
                                    <option value="Идея" id="opt3">Идея</option>
                                </select>
                                <div class="form-text">Тип определяет направление работы.<br>Тип «Идея» позволяет использовать вашу идею любому пользователю и создавать на её основе свой проект.</div>
                                <div class="form-text custom-error-block">
                                    {% if errors is defined %}
                                    {{ errors.get('type', '')[0] }}
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group mb-5">
                        <div class="row">
                            <label for="theme" class="col-sm-2 col-form-label">Тема</label>
                            <div class="col-sm-10">
                                <textarea type="text" class="form-control custom-textarea-resize-none-hidden-overflow" id="theme" name="theme" oninput="textarea_auto_resize('theme')">{% if edit is defined %}{{ project.theme }}{% endif %}</textarea>
                                <div class="form-text">Что из себя представляет ваш проект?</div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group mb-5">
                        <div class="row">
                            <label for="goal" class="col-sm-2 col-form-label">Цель</label>
                            <div class="col-sm-10">
                                <textarea type="text" class="form-control custom-textarea-resize-none-hidden-overflow" id="goal" name="goal" oninput="textarea_auto_resize('goal')">{% if edit is defined %}{{ project.goal }}{% endif %}</textarea>
                                <div class="form-text">Напишите, какую цель вы перед собой поставили в рамках этого проекта. Какую проблему вы решите или какое новое знание получите? Цель должна отражать тему проекта.</div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group mb-5">
                        <div class="row">
                            <label for="description" class="col-sm-2 col-form-label">Описание</label>
                            <div class="col-sm-10">
                                <textarea type="text" class="form-control custom-textarea-resize-none-hidden-overflow" id="description" name="description" oninput="textarea_auto_resize('description')">{% if edit is defined %}{{ project.description }}{% endif %}</textarea>
                                <div class="form-text">Опишите свой проект максимально подробно. Это поможет пользователям сайта узнать ваш проект лучше.</div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group mb-5">
                        <div class="row">
                            <label for="tags" class="col-sm-2 col-form-label">Теги</label>
                            <div class="col-sm-10">
                                <textarea type="text" class="form-control custom-textarea-resize-none-hidden-overflow" id="tags" name="tags" oninput="textarea_auto_resize('tags')">{% if edit is defined %}{{ project.tags }}{% endif %}</textarea>
                                <div class="form-text">Вы можете указать теги для проекта через пробел.</div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group mb-5">
                        <a data-bs-toggle="collapse" class="link-dark" href="#vacancies" role="button" aria-expanded="false" aria-controls="vacancies">
                            <h4>Вакансии</h4>
                        </a>
                        <div id="vacancies" class="collapse show">
                            <div class="row mt-4" id="vacancyCards">
                                {% if edit is defined and project.vacancies %}
                                    {% for vacancy in project.vacancies %}
                                            <div class="col-6 mb-4">
                                                <div class="card">
                                                    <div class="card-header">
                                                        <textarea rows="2" name="vacancyName" type="text" class="form-control custom-textarea-resize-none-hidden-overflow" placeholder="Название вакансии">{{ vacancy.vacancyName }}</textarea>
                                                    </div>
                                                    <div class="card-body">
                                                        <textarea name="vacancyDescription" class="form-control mb-3 custom-textarea-resize-none-hidden-overflow" rows="8" placeholder="Описание" oninput="this.style.height = 'auto';this.style.height = this.scrollHeight + 'px';">{{ vacancy.vacancyDescription }}</textarea>
                                                        <textarea name="vacancyNeeds" type="text" class="form-control mb-3 custom-textarea-resize-none-hidden-overflow" rows="8" placeholder="Требования" oninput="this.style.height = 'auto';this.style.height = this.scrollHeight + 'px';">{{ vacancy.vacancyNeeds }}</textarea>
                                                        
                                                        <!-- <textarea name="vacancyTags" class="form-control custom-textarea-resize-none-hidden-overflow" rows="2" placeholder="Теги" oninput="this.style.height = 'auto';this.style.height = this.scrollHeight + 'px';">{{ vacancy.vacancyTags }}</textarea>
                                                        <div class="form-text">Теги разделите пробелами, не указывайте символ # в начале.<br>Пример: python sqlalchemy питон javascript</div> -->
                                                        
                                                        <button type="button" class="btn btn-outline-danger mt-4 btn-sm delete-btn">Удалить вакансию</button>
                                                    </div>
                                                </div>
                                            </div>
                                    {% endfor %}
                                {% endif %}
                                <div class="col-6 mb-4 d-none">
                                    <div class="card">
                                        <div class="card-header">
                                            <textarea rows="2" name="vacancyName" type="text" class="form-control custom-textarea-resize-none-hidden-overflow" placeholder="Название вакансии"></textarea>
                                        </div>
                                        <div class="card-body">
                                            <textarea name="vacancyDescription" class="form-control mb-3 custom-textarea-resize-none-hidden-overflow" rows="4" placeholder="Описание" oninput="this.style.height = 'auto';this.style.height = this.scrollHeight + 'px';"></textarea>
                                            <textarea name="vacancyNeeds" type="text" class="form-control mb-3 custom-textarea-resize-none-hidden-overflow" rows="4" placeholder="Требования" oninput="this.style.height = 'auto';this.style.height = this.scrollHeight + 'px';"></textarea>
                                            
                                            <!-- <textarea name="VacancyTags" class="form-control custom-textarea-resize-none-hidden-overflow" rows="2" placeholder="Теги" oninput="this.style.height = 'auto';this.style.height = this.scrollHeight + 'px';"></textarea>
                                            <div class="form-text">Теги разделите пробелами, не указывайте символ # в начале.<br>Пример: python sqlalchemy питон javascript</div> -->
                                            
                                            <button type="button" class="btn btn-outline-danger mt-4 btn-sm delete-btn">Удалить вакансию</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <button type="button" class="btn btn-primary mt-4 btn-sm" id="addVacancyBtn">Добавить вакансию</button>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <button type="submit" class="btn btn-primary mt-4">Сохранить {% if edit is not defined %}и опубликовать{% endif %}</button>
                        </div>
                        <div class="col-sm-auto">
                            <button type="button" class="btn btn-dark mt-4" data-bs-toggle="modal" data-bs-target="#AI_tools">Открыть ИИ функции</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}